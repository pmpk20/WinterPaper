---
title: "Winter Paper Step-by-step"
author: "Peter King"
date: "`r Sys.Date()`"
output: pdf_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```



```{r Step Zero: Prepare Data}


## Start by converting raw "SurveyData.xlsx" to cleaned "Winter_dataframe_Step1.csv"
source("OtherScripts/Winter_CleanSurveyData.R")

## Add spatial data to make "Winter_dataframe_Step2.csv"
source("OtherScripts/Winter_AddSpatialData.R")



```


```{r Step One: Choice Models}


## Estimate basic attributes only model in WTP-space
source("CEModelScripts/Winter_MXL_ModelOne.R")

## Estimate basic attributes only model in preference-space
source("CEModelScripts/Winter_MXL_ModelOne_PrefSpace.R")

## Add covariates
source("CEModelScripts/Winter_MXL_ModelTwo.R")


```



```{r Step Two: Choice Models Output}


## Model outputs and append WTP to data to create "Winter_dataframe_Step4.csv"
source("CEModelScripts/Winter_MXLSummary.R")

## Check Sarrias (2020) validity
source("CEModelScripts/Winter_WTPValidity.R")


```


```{r Step Two B: Choice Models Output of WTP}


## Create table
source("OtherScripts/Winter_WTPSummary.R")


## Estimate CS using the preference-space model
source("OtherScripts/Winter_ConsumerSurplus.R")


## Plot distribution of WTP
source("OtherScripts/Figures/Winter_Figure2_Boxplot_Unconditionals_Parellel.R")

## Plot distribution of WTP by impairments
source("OtherScripts/Figures/Winter_PlotDistributions_Impairments.R")


## Plot distribution of WTP by visitfrequency
source("OtherScripts/Figures/Winter_PlotDistributions_VisitFrequency.R")

```



```{r Step Three: Spatial Modelling}


## Global Moran's I for autocorrelation
source("OtherScripts/Spatial/Winter_GlobalMorans.R")

## Local Moran's I for autocorrelation
source("OtherScripts/Spatial/Winter_LocalMorans.R")

## Spatial Lag Model simulate P values
source("OtherScripts/Spatial/WP5_Winter_SpatialLagModels_Simulator.R")

## Spatial Lag Model all outputs
source("OtherScripts/Spatial/Winter_SpatialLagModels.R")


```



```{r Step Four: Done}


# Now write the paper.

```

